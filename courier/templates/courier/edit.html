{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ... your existing head ... -->
</head>
<body>
  {% include "courier/dashboard-nav.html" %}

  <div class="container my-3">
    <div class="d-flex align-items-center justify-content-center gap-3">
      <img src="{% static 'courier/images/logo.png' %}" alt="DK Courier Logo" style="height: 60px;">
      <div class="text-start lh-sm">
        <h5 class="mb-0">DK Courier and Cargo Services</h5>
        <small>Birtamode, Jhapa | 023-53, 9824915826</small>
      </div>
    </div>
  </div>

  <div class="container">
    <form method="post">
      {% csrf_token %}
      <div class="row mb-3">
        <div class="col-md-3 col-sm-6 mb-2">
          <label>CN NO:</label>
          <p>DK170 <span id="cn">{{ parcel.cn_no|default:"00" }}</span></p>
        </div>
        <div class="col-md-3 col-sm-6 mb-2">
          <label>Destination Country <span class="text-danger">*</span></label>
          <select name="country" id="countrySelect" class="form-select" required>
            <option value="">Select Country</option>
            {% for c in "Nepal India UAE Australia Canada Qatar Saudi Arebia USA".split %}
              <option value="{{ c }}" {% if parcel.country == c %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-3 col-sm-6 mb-2 {% if parcel.country != 'Nepal' %}hidden{% endif %}" id="districtWrapper">
          <label>Destination District <span class="text-danger">*</span></label>
          <select name="district" id="districtSelect" class="form-select" {% if parcel.country == 'Nepal' %}required{% endif %}>
            <option value="" disabled {% if not parcel.district %}selected{% endif %}>Select District</option>
            {% for district in "acham arghakhanchi baglung bajhang bajura baitadi banke bardiya bara Bhaktapur bhojpur chitwan dadeldhura Dang dailekh darchula dhading dhankuta dhanusha dolakha dolpa doti eastern_rukum gulmi gorkha humla ilam jhapa jajarkot jumla Kathmandu kanchanpur kailali kalikot kapilvastu kaski khotang kavrepalanchok lalitpur lamjung mahendranagar mahottari makwanpur manang morang mugu myagdi mustang nawalpur east-nawalparasi west-nawalparasi nuwakot okhaldhunga parbat parsa pachthar palpa pyuthan rajbiraj rautahat ramechap rasuwa Rupandehi Rolpa salyan sankhuwasabha saptari sarlahi sindhuli sindhupalchok siraha solukhumbu sunsari Surkhet Syangja tanahun taplejung terhathum udayapur western_rukum".split %}
              <option value="{{ district }}" {% if parcel.district == district %}selected{% endif %}>{{ district|capfirst }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-3 col-sm-6 mb-2">
          <label>Packet Type <span class="text-danger">*</span></label>
          <select name="pactype" class="form-select" required>
            <option value="" {% if not parcel.pactype %}selected{% endif %}>--None--</option>
            <option value="Document" {% if parcel.pactype == "Document" %}selected{% endif %}>Document</option>
            <option value="Parcel" {% if parcel.pactype == "Parcel" %}selected{% endif %}>Parcel</option>
          </select>
        </div>
        <div class="col-md-3 col-sm-6 mb-2">
          <label>Booking Date</label>
          <input type="text" name="date" id="realDateTextBox" class="form-control" readonly value="{{ parcel.date|date:'Y-m-d' }}">
        </div>
      </div>

      <!-- Sender Details -->
      <h5 class="form-section-title">Sender Details</h5>
      <div class="row mb-3">
        <div class="col-md-4 mb-2">
          <label>Name <span class="text-danger">*</span></label>
          <input type="text" name="Sname" class="form-control" value="{{ parcel.Sname }}" required>
        </div>
        <div class="col-md-4 mb-2">
          <label>Phone Number <span class="text-danger">*</span></label>
          <input type="tel" name="Snumber" pattern="[0-9]{10}" class="form-control" value="{{ parcel.Snumber }}" required>
        </div>
        <div class="col-md-4 mb-2">
          <label>Address Line 1 <span class="text-danger">*</span></label>
          <input type="text" name="Saddress" class="form-control" value="{{ parcel.Saddress }}" required>
        </div>
        <div class="col-md-12">
          <label>Address Line 2</label>
          <input type="text" name="Saddress1" class="form-control" value="{{ parcel.Saddress1 }}">
        </div>
      </div>

      <!-- Receiver Details -->
      <h5 class="form-section-title">Receiver Details</h5>
      <div class="row mb-3">
        <div class="col-md-4 mb-2">
          <label>Name <span class="text-danger">*</span></label>
          <input type="text" name="Rname" class="form-control" value="{{ parcel.Rname }}" required>
        </div>
        <div class="col-md-4 mb-2">
          <label>Phone Number <span class="text-danger">*</span></label>
          <input type="tel" name="Rnumber" pattern="[0-9]{10}" class="form-control" value="{{ parcel.Rnumber }}" required>
        </div>
        <div class="col-md-4 mb-2">
          <label>Address Line 1 <span class="text-danger">*</span></label>
          <input type="text" name="Raddress" class="form-control" value="{{ parcel.Raddress }}" required>
        </div>
        <div class="col-md-12">
          <label>Address Line 2</label>
          <input type="text" name="Raddress1" class="form-control" value="{{ parcel.Raddress1 }}">
        </div>
      </div>

      <!-- Package & Payment Info -->
      <h5 class="form-section-title">Package & Payment Info</h5>
      <div class="row mb-3">
        <div class="col-md-2 col-sm-6 mb-2">
          <label>Payment</label>
          <select name="payments" class="form-select">
            <option value="Cash" {% if parcel.payments == "Cash" %}selected{% endif %}>Cash</option>
            <option value="Credit" {% if parcel.payments == "Credit" %}selected{% endif %}>Credit</option>
            <option value="COD" {% if parcel.payments == "COD" %}selected{% endif %}>COD</option>
          </select>
        </div>
        <div class="col-md-2 col-sm-6 mb-2">
          <label>Delivery Service <span class="text-danger">*</span></label>
          <select name="service" class="form-select" required>
            <option value="Door to Door" {% if parcel.service == "Door to Door" %}selected{% endif %}>Door to Door</option>
            <option value="Office Collect" {% if parcel.service == "Office Collect" %}selected{% endif %}>Office Collect</option>
          </select>
        </div>
        <div class="col-md-2 col-sm-6 mb-2">
          <label>Total Valuation (RS) <span class="text-danger">*</span></label>
          <input type="text" name="price" class="form-control" value="{{ parcel.price }}">
        </div>
        <div class="col-md-2 col-sm-6 mb-2">
          <label>Weight (KG) <span class="text-danger">*</span></label>
          <input type="number" name="weight" class="form-control" value="{{ parcel.weight }}" required>
        </div>
        <div class="col-md-2 col-sm-6 mb-2">
          <label>Pieces</label>
          <input type="number" name="pieces" class="form-control" value="{{ parcel.pieces }}" required>
        </div>
        <div class="col-md-2 col-sm-6 mb-2">
          <label>Booked By</label>
          <input type="text" name="Bookby" class="form-control" value="{{ parcel.Bookby }}">
        </div>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-success px-5 py-2">Update</button>
      </div>
    </form>
  </div>

  <script>
    document.getElementById("countrySelect").addEventListener("change", function () {
      const districtWrapper = document.getElementById("districtWrapper");
      const districtSelect = document.getElementById("districtSelect");
      if (this.value === "Nepal") {
        districtWrapper.classList.remove("hidden");
        districtSelect.required = true;
      } else {
        districtWrapper.classList.add("hidden");
        districtSelect.required = false;
        districtSelect.value = "";
      }
    });
  </script>
</body>
</html>
